#-------------------------------------------------------------
# Nodographer Configuration File
#-------------------------------------------------------------

[database]
server = "localhost"
user = "mesh-map"
password = "password"
database = "node_map"
table_node = "node_info"
table_map = "map_info"
table_aredn = "aredn_info"
table_hops = "hop_sequences"

[polling]
nodelistNode = "localnode.local.mesh"
localTimeZone = "America/Los_Angeles"
numParallelThreads = 500
pollerCycleTime = 15

[hops]
enableHopCount = true
parallelThreads = 50
probeWaitSec = 2.0
maxTTL = 32
timeoutSec = 80.0

[map]
center_lat = 43.970
center_lon = -120.034
initial_zoom_level = 7
distanceUnits = "miles"
browserTitle = "Nodographer Mesh Map"
pageLogo = "images/MESHMAP_LOGO.svg"
contact = ""

[attribution]
credit = "Â© OpenStreetMap contributors"
browserTitle = "Nodographer Node Report"
pageTitle = "Node Report"

# Data retention settings
# Nodes are stored in the database even if they temporarily disappear from polls.
# This allows the system to "ride through" temporary network issues or unreachable nodes.
[retention]
# Enable automatic cleanup of old nodes from the database
expireOldNodes = true

# Number of days to retain nodes in database after their last_seen timestamp
# Nodes not seen within this period will be:
# 1. Excluded from JSON output files (map_data.json and node_report_data.json)
# 2. Eventually deleted from the database (if expireOldNodes is true)
# This allows nodes to temporarily drop out for one or more polling cycles
# without being removed from the map, providing stability during network issues.
expireInterval = 30

# Number of days to retain hop sequence measurements
expireHops = 30

[json]
jsonDir = "/srv/meshmap/frontend/data"

[tileservers]
aredn.K1RKS = "//aredn-tileserver2.local.mesh/hot/{z}/{x}/{y}.png"
aredn.K9RCP = "//wvmn-tileserver.local.mesh/osm/tiles/{z}/{x}/{y}.png"
aredn.W7SLZ = "//w7slz-tileserver.local.mesh:8080/styles/basic-preview/512/{z}/{x}/{y}.png"
inet.Topographic = "//{s}.tile.opentopomap.org/{z}/{x}/{y}.png"
inet.Street = "//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"

priority = ["aredn.K1RKS", "aredn.K9RCP", "aredn.W7SLZ", "inet.Topographic", "inet.Street"]